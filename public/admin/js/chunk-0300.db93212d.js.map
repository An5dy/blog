{"version":3,"sources":["webpack:///./src/api/article.js","webpack:///./src/views/articleAdd/ArticleAdd.vue?a0a3","webpack:///src/views/articleAdd/ArticleAdd.vue","webpack:///./src/views/articleAdd/ArticleAdd.vue?3e92","webpack:///./src/views/articleAdd/ArticleAdd.vue","webpack:///./node_modules/core-js/modules/es6.string.includes.js","webpack:///./node_modules/core-js/modules/_fails-is-regexp.js","webpack:///./node_modules/core-js/modules/es7.array.includes.js","webpack:///./node_modules/core-js/modules/_is-regexp.js","webpack:///./src/views/articleAdd/ArticleAdd.vue?0522","webpack:///./src/api/category.js","webpack:///./node_modules/core-js/modules/_string-context.js"],"names":["storeArticle","data","Object","_utils_request__WEBPACK_IMPORTED_MODULE_0__","url","method","showArtcile","id","getArticles","params","deleteArticle","_method","updateArticle","render","_vm","this","_h","$createElement","_c","_self","attrs","label-position","label-width","model","article","label","staticStyle","width","size","value","callback","$$v","$set","expression","ref","staticClass","action","name","headers","uploadHeaders","show-file-list","auto-upload","on-success","handleUploadSuccess","before-upload","beforeUpload","src","cover_img","height","code-style","toolbars","on","imgAdd","_l","tag","key","margin-right","closable","disable-transitions","close","$event","handleClose","_v","_s","blur","handleInputConfirm","nativeOn","keyup","_k","keyCode","inputValue","trim","click","showInput","placeholder","category","title","type","loading","onSubmit","onUpdate","staticRenderFns","ArticleAddvue_type_script_lang_js_","components","mavonEditor","mavon_editor","inputVisible","imageUrl","category_id","markdown","tags","categories","bold","italic","header","underline","strikethrough","mark","superscript","subscript","quote","ol","ul","link","imagelink","code","table","fullscreen","readmodel","htmlcode","help","undo","redo","trash","save","navigation","alignleft","aligncenter","alignright","subfield","preview","editor","methods","splice","indexOf","_this","length","$message","warning","$nextTick","$refs","saveTagInput","input","focus","includes","push","pos","$file","_this2","formData","FormData","append","upload","then","response","md","$img2Url","basePath","getCategories","_this3","_this4","$notify","message","duration","$router","_this5","getArticle","_this6","$route","file","isLt2M","error","setUploadHeaders","Accept","X-Requested-With","Authorization","auth","watch","mounted","articleAdd_ArticleAddvue_type_script_lang_js_","component","componentNormalizer","options","__file","__webpack_exports__","$export","__webpack_require__","context","INCLUDES","P","F","searchString","arguments","undefined","MATCH","module","exports","KEY","re","e","f","$includes","el","isObject","cof","it","isRegExp","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_10_oneOf_1_0_node_modules_css_loader_index_js_ref_10_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_10_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_ArticleAdd_vue_vue_type_style_index_0_id_16f719ea_lang_less_scoped_true___WEBPACK_IMPORTED_MODULE_0___default","storeCategory","updateCategory","deleteCategory","defined","that","NAME","TypeError","String"],"mappings":"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","file":"admin/js/chunk-0300.db93212d.js","sourcesContent":["import request from \"@/utils/request\";\n\n/**\n * 新增文章\n *\n * @param {*} data\n */\nexport function storeArticle(data) {\n  return request({\n    url: \"/articles\",\n    method: \"post\",\n    data\n  });\n}\n\n/**\n * 文章详情\n *\n * @param {*} id\n */\nexport function showArtcile(id) {\n  return request({\n    url: \"/articles/\" + id,\n    method: \"get\"\n  });\n}\n\n/**\n * 文章列表\n *\n * @param {*} data\n */\nexport function getArticles(data) {\n  return request({\n    url: \"/articles\",\n    method: \"get\",\n    params: data\n  });\n}\n\n/**\n * 删除文章\n *\n * @param {*} id\n */\nexport function deleteArticle(id) {\n  return request({\n    url: \"/articles/\" + id,\n    method: \"post\",\n    data: {\n      _method: \"DELETE\"\n    }\n  });\n}\n\n/**\n * 修改文章\n *\n * @param {*} id\n * @param {*} data\n */\nexport function updateArticle(id, data) {\n  data[\"_method\"] = \"PUT\";\n  return request({\n    url: \"/articles/\" + id,\n    method: \"post\",\n    data\n  });\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-form',{attrs:{\"label-position\":\"right\",\"label-width\":\"80px\",\"model\":_vm.article}},[_c('el-form-item',{attrs:{\"label\":\"标题\"}},[_c('el-input',{staticStyle:{\"width\":\"450px\"},attrs:{\"size\":\"small\"},model:{value:(_vm.article.title),callback:function ($$v) {_vm.$set(_vm.article, \"title\", $$v)},expression:\"article.title\"}})],1),_c('el-form-item',{attrs:{\"label\":\"封面\"}},[_c('el-upload',{ref:\"upload\",staticClass:\"avatar-uploader\",attrs:{\"action\":\"/api/admin/images\",\"name\":\"image\",\"headers\":_vm.uploadHeaders,\"show-file-list\":false,\"auto-upload\":true,\"on-success\":_vm.handleUploadSuccess,\"before-upload\":_vm.beforeUpload}},[(_vm.article.cover_img)?_c('img',{staticClass:\"avatar\",attrs:{\"src\":_vm.article.cover_img}}):_c('i',{staticClass:\"el-icon-plus avatar-uploader-icon\"})])],1),_c('el-form-item',{attrs:{\"label\":\"正文\"}},[_c('mavon-editor',{ref:\"md\",staticStyle:{\"height\":\"600px\"},attrs:{\"code-style\":\"googlecode\",\"toolbars\":_vm.toolbars},on:{\"imgAdd\":_vm.imgAdd},model:{value:(_vm.article.markdown),callback:function ($$v) {_vm.$set(_vm.article, \"markdown\", $$v)},expression:\"article.markdown\"}})],1),_c('el-form-item',{attrs:{\"label\":\"标签\"}},[_vm._l((_vm.article.tags),function(tag){return _c('el-tag',{key:tag,staticStyle:{\"margin-right\":\"10px\"},attrs:{\"size\":\"normal\",\"closable\":\"\",\"disable-transitions\":false},on:{\"close\":function($event){_vm.handleClose(tag)}}},[_vm._v(\"\\n      \"+_vm._s(tag)+\"\\n    \")])}),(_vm.inputVisible)?_c('el-input',{ref:\"saveTagInput\",staticClass:\"input-new-tag\",attrs:{\"size\":\"small\"},on:{\"blur\":_vm.handleInputConfirm},nativeOn:{\"keyup\":function($event){if(!('button' in $event)&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.handleInputConfirm($event)}},model:{value:(_vm.inputValue),callback:function ($$v) {_vm.inputValue=(typeof $$v === 'string'? $$v.trim(): $$v)},expression:\"inputValue\"}}):_c('el-button',{staticClass:\"button-new-tag\",attrs:{\"size\":\"small\"},on:{\"click\":_vm.showInput}},[_vm._v(\"+ 新增标签\")])],2),_c('el-form-item',{attrs:{\"label\":\"分类\"}},[_c('el-select',{attrs:{\"size\":\"small\",\"placeholder\":\"请选择分类\"},model:{value:(_vm.article.category_id),callback:function ($$v) {_vm.$set(_vm.article, \"category_id\", $$v)},expression:\"article.category_id\"}},_vm._l((_vm.categories),function(category){return _c('el-option',{key:category.id,attrs:{\"label\":category.title,\"value\":category.id}})}))],1),_c('el-form-item',[(_vm.article.id === 0)?_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\",\"loading\":_vm.loading},on:{\"click\":_vm.onSubmit}},[_vm._v(\"确认发布\")]):_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\",\"loading\":_vm.loading},on:{\"click\":_vm.onUpdate}},[_vm._v(\"确认修改\")])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <el-form \n    label-position=\"right\" \n    label-width=\"80px\" \n    :model=\"article\">\n    <el-form-item label=\"标题\">\n      <el-input\n        v-model=\"article.title\"\n        size=\"small\"\n        style=\"width: 450px\"\n      />\n    </el-form-item>\n    <el-form-item label=\"封面\">\n      <el-upload\n        ref=\"upload\"\n        class=\"avatar-uploader\"\n        action=\"/api/admin/images\"\n        name=\"image\"\n        :headers=\"uploadHeaders\"\n        :show-file-list=\"false\"\n        :auto-upload=\"true\"\n        :on-success=\"handleUploadSuccess\"\n        :before-upload=\"beforeUpload\">\n        <img \n          v-if=\"article.cover_img\" \n          :src=\"article.cover_img\" \n          class=\"avatar\">\n        <i \n          v-else \n          class=\"el-icon-plus avatar-uploader-icon\"/>\n      </el-upload>\n    </el-form-item>\n    <el-form-item label=\"正文\">\n      <mavon-editor\n        style=\"height: 600px;\"\n        ref='md'\n        code-style=\"googlecode\"\n        v-model=\"article.markdown\"\n        @imgAdd=\"imgAdd\"\n        :toolbars=\"toolbars\"/>\n    </el-form-item>\n    <el-form-item label=\"标签\">\n      <el-tag\n        style=\"margin-right: 10px\"\n        size=\"normal\"\n        v-for=\"tag in article.tags\"\n        :key=\"tag\"\n        closable\n        :disable-transitions=\"false\"\n        @close=\"handleClose(tag)\">\n        {{ tag }}\n      </el-tag>\n      <el-input\n        class=\"input-new-tag\"\n        v-if=\"inputVisible\"\n        v-model.trim=\"inputValue\"\n        ref=\"saveTagInput\"\n        size=\"small\"\n        @keyup.enter.native=\"handleInputConfirm\"\n        @blur=\"handleInputConfirm\"\n      />\n      <el-button\n        v-else\n        class=\"button-new-tag\"\n        size=\"small\"\n        @click=\"showInput\">+ 新增标签</el-button>\n    </el-form-item>\n    <el-form-item label=\"分类\">\n      <el-select\n        v-model=\"article.category_id\"\n        size=\"small\"\n        placeholder=\"请选择分类\">\n        <el-option\n          v-for=\"category in categories\"\n          :label=\"category.title\"\n          :value=\"category.id\"\n          :key=\"category.id\"/>\n      </el-select>\n    </el-form-item>\n    <el-form-item>\n      <el-button\n        @click=\"onSubmit\"\n        size=\"small\"\n        type=\"primary\"\n        :loading=\"loading\"\n        v-if=\"article.id === 0\">确认发布</el-button>\n      <el-button\n        @click=\"onUpdate\"\n        size=\"small\"\n        type=\"primary\"\n        :loading=\"loading\"\n        v-else>确认修改</el-button>\n    </el-form-item>\n  </el-form>\n</template>\n\n<script>\nimport { mavonEditor } from \"mavon-editor\";\nimport \"mavon-editor/dist/css/index.css\";\nimport { imageUpload } from \"@/api/upload\";\nimport { getCategories } from \"@/api/category\";\nimport { storeArticle, showArtcile, updateArticle } from \"@/api/article\";\nimport { getAccessToken } from \"@/utils/auth\";\nexport default {\n  name: \"ArticleAdd\",\n  components: {\n    mavonEditor\n  },\n  data() {\n    return {\n      inputVisible: false,\n      inputValue: \"\",\n      value: \"\",\n      imageUrl: \"\",\n      article: {\n        title: \"\",\n        category_id: \"\",\n        markdown: \"\",\n        tags: [],\n        cover_img: \"\",\n        id: 0\n      },\n      loading: false,\n      categories: [],\n      toolbars: {\n        bold: true, // 粗体\n        italic: true, // 斜体\n        header: true, // 标题\n        underline: true, // 下划线\n        strikethrough: true, // 中划线\n        mark: true, // 标记\n        superscript: true, // 上角标\n        subscript: true, // 下角标\n        quote: true, // 引用\n        ol: true, // 有序列表\n        ul: true, // 无序列表\n        link: true, // 链接\n        imagelink: true, // 图片链接\n        code: true, // code\n        table: true, // 表格\n        fullscreen: true, // 全屏编辑\n        readmodel: true, // 沉浸式阅读\n        htmlcode: true, // 展示html源码\n        help: true, // 帮助\n        /* 1.3.5 */\n        undo: true, // 上一步\n        redo: true, // 下一步\n        trash: true, // 清空\n        save: true, // 保存（触发events中的save事件）\n        /* 1.4.2 */\n        navigation: true, // 导航目录\n        /* 2.1.8 */\n        alignleft: true, // 左对齐\n        aligncenter: true, // 居中\n        alignright: true, // 右对齐\n        /* 2.2.1 */\n        subfield: true, // 单双栏模式\n        preview: true // 预览\n      },\n      editor: {},\n      uploadHeaders: {}\n    };\n  },\n  methods: {\n    /**\n     * 关闭标签\n     */\n    handleClose(tag) {\n      this.article.tags.splice(this.article.tags.indexOf(tag), 1);\n    },\n    /**\n     * 显示标签\n     */\n    showInput() {\n      if (this.article.tags.length >= 5) {\n        this.$message.warning(\"标签最多添加5个\");\n        return;\n      }\n      this.inputVisible = true;\n      this.$nextTick(() => {\n        this.$refs.saveTagInput.$refs.input.focus();\n      });\n    },\n    /**\n     * 添加标签\n     */\n    handleInputConfirm() {\n      if (this.article.tags.includes(this.inputValue)) {\n        this.$message.warning(\"当前标签已添加\");\n        return;\n      }\n      let inputValue = this.inputValue;\n      if (inputValue) {\n        this.article.tags.push(inputValue);\n      }\n      this.inputVisible = false;\n      this.inputValue = \"\";\n    },\n    /**\n     * markdown 编辑器图片上传\n     */\n    imgAdd(pos, $file) {\n      let formData = new FormData();\n      formData.append(\"image\", $file);\n      imageUpload(formData).then(response => {\n        if (response.data.code === \"2000\") {\n          this.$refs.md.$img2Url(pos, response.data.data.basePath);\n        }\n      });\n    },\n    /**\n     * 获取分类\n     */\n    getCategories() {\n      getCategories().then(response => {\n        this.categories = response.data.data;\n      });\n    },\n    /**\n     * 提交\n     */\n    onSubmit() {\n      storeArticle(this.article).then(() => {\n        this.$notify({\n          title: \"成功\",\n          message: \"文章添加成功\",\n          type: \"success\",\n          duration: 2000\n        });\n        this.$router.push(\"/articles\");\n      });\n    },\n    /**\n     * 修改\n     */\n    onUpdate() {\n      updateArticle(this.article.id, this.article).then(() => {\n        this.$notify({\n          title: \"成功\",\n          message: \"文章修改成功\",\n          type: \"success\",\n          duration: 2000\n        });\n        this.$router.push(\"/articles\");\n      });\n    },\n    /**\n     * 获取文章详情\n     */\n    getArticle() {\n      if (this.$route.params.id > 0) {\n        showArtcile(this.$route.params.id).then(response => {\n          this.article = response.data.data;\n          this.article.category_id = response.data.data.category_id;\n          for (let key in this.article.tags) {\n            this.article.tags[key] = this.article.tags[key].title;\n          }\n          this.getCategories();\n        });\n      } else {\n        this.getCategories();\n      }\n    },\n    /**\n     * 封面图片上传前钩子\n     */\n    beforeUpload(file) {\n      const isLt2M = file.size / 1024 / 1024 < 4;\n\n      if (!isLt2M) {\n        this.$message.error(\"上传头像图片大小不能超过 4MB!\");\n      }\n      return isLt2M;\n    },\n    /**\n     * 封面图片上传成功\n     */\n    handleUploadSuccess(response) {\n      if (response.code === \"2000\") {\n        this.article.cover_img = response.data.basePath;\n      } else {\n        this.$message.error(\"封面图片上传失败。\");\n      }\n    },\n    /**\n     * 文件上传请求头\n     */\n    setUploadHeaders() {\n      this.uploadHeaders = {\n        Accept: \"application/json\",\n        \"X-Requested-With\": \"XMLHttpRequest\",\n        Authorization: \"Bearer \" + getAccessToken()\n      };\n    }\n  },\n  watch: {\n    $route() {\n      this.article = {};\n    }\n  },\n  mounted() {\n    this.getArticle();\n    this.setUploadHeaders();\n  }\n};\n</script>\n\n<style lang=\"less\" scoped>\n@import \"./ArticleAdd.less\";\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ArticleAdd.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ArticleAdd.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ArticleAdd.vue?vue&type=template&id=16f719ea&scoped=true&\"\nimport script from \"./ArticleAdd.vue?vue&type=script&lang=js&\"\nexport * from \"./ArticleAdd.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ArticleAdd.vue?vue&type=style&index=0&id=16f719ea&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"16f719ea\",\n  null\n  \n)\n\ncomponent.options.__file = \"ArticleAdd.vue\"\nexport default component.exports","// 21.1.3.7 String.prototype.includes(searchString, position = 0)\n'use strict';\nvar $export = require('./_export');\nvar context = require('./_string-context');\nvar INCLUDES = 'includes';\n\n$export($export.P + $export.F * require('./_fails-is-regexp')(INCLUDES), 'String', {\n  includes: function includes(searchString /* , position = 0 */) {\n    return !!~context(this, searchString, INCLUDES)\n      .indexOf(searchString, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","var MATCH = require('./_wks')('match');\nmodule.exports = function (KEY) {\n  var re = /./;\n  try {\n    '/./'[KEY](re);\n  } catch (e) {\n    try {\n      re[MATCH] = false;\n      return !'/./'[KEY](re);\n    } catch (f) { /* empty */ }\n  } return true;\n};\n","'use strict';\n// https://github.com/tc39/Array.prototype.includes\nvar $export = require('./_export');\nvar $includes = require('./_array-includes')(true);\n\n$export($export.P, 'Array', {\n  includes: function includes(el /* , fromIndex = 0 */) {\n    return $includes(this, el, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\nrequire('./_add-to-unscopables')('includes');\n","// 7.2.8 IsRegExp(argument)\nvar isObject = require('./_is-object');\nvar cof = require('./_cof');\nvar MATCH = require('./_wks')('match');\nmodule.exports = function (it) {\n  var isRegExp;\n  return isObject(it) && ((isRegExp = it[MATCH]) !== undefined ? !!isRegExp : cof(it) == 'RegExp');\n};\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/lib/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ArticleAdd.vue?vue&type=style&index=0&id=16f719ea&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/lib/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ArticleAdd.vue?vue&type=style&index=0&id=16f719ea&lang=less&scoped=true&\"","import request from \"@/utils/request\";\n\n/**\n * 获取分类列表\n */\nexport function getCategories() {\n  return request({\n    url: \"/categories\",\n    method: \"get\"\n  });\n}\n\n/**\n * 新增\n *\n * @param {*} data\n */\nexport function storeCategory(data) {\n  return request({\n    url: \"/categories\",\n    method: \"post\",\n    data\n  });\n}\n\n/**\n * 更新\n *\n * @param {*} data\n * @param {*} id\n */\nexport function updateCategory(data, id) {\n  data[\"_method\"] = \"PUT\";\n  return request({\n    url: \"/categories/\" + id,\n    method: \"post\",\n    data\n  });\n}\n\n/**\n * 删除\n *\n * @param {*} id\n */\nexport function deleteCategory(id) {\n  return request({\n    url: \"/categories/\" + id,\n    method: \"post\",\n    data: {\n      _method: \"DELETE\"\n    }\n  });\n}\n","// helper for String#{startsWith, endsWith, includes}\nvar isRegExp = require('./_is-regexp');\nvar defined = require('./_defined');\n\nmodule.exports = function (that, searchString, NAME) {\n  if (isRegExp(searchString)) throw TypeError('String#' + NAME + \" doesn't accept regex!\");\n  return String(defined(that));\n};\n"],"sourceRoot":""}