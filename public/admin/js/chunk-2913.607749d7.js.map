{"version":3,"sources":["webpack:///./src/views/articleAdd/ArticleAdd.vue?264f","webpack:///./src/api/article.js","webpack:///./src/views/articleAdd/ArticleAdd.vue?e47e","webpack:///src/views/articleAdd/ArticleAdd.vue","webpack:///./src/views/articleAdd/ArticleAdd.vue?3e92","webpack:///./src/views/articleAdd/ArticleAdd.vue","webpack:///./node_modules/core-js/modules/es6.string.includes.js","webpack:///./node_modules/core-js/modules/_fails-is-regexp.js","webpack:///./node_modules/core-js/modules/es7.array.includes.js","webpack:///./node_modules/core-js/modules/_is-regexp.js","webpack:///./src/api/category.js","webpack:///./node_modules/core-js/modules/_string-context.js"],"names":["_node_modules_mini_css_extract_plugin_dist_loader_js_ref_10_oneOf_1_0_node_modules_css_loader_index_js_ref_10_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_10_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_ArticleAdd_vue_vue_type_style_index_0_id_2b896208_lang_less_scoped_true___WEBPACK_IMPORTED_MODULE_0___default","storeArticle","data","Object","_utils_request__WEBPACK_IMPORTED_MODULE_0__","url","method","showArtcile","id","getArticles","params","deleteArticle","_method","updateArticle","append","render","_vm","this","_h","$createElement","_c","_self","attrs","label-position","label-width","model","article","label","staticStyle","width","size","value","callback","$$v","$set","expression","ref","staticClass","action","name","headers","uploadHeaders","show-file-list","auto-upload","on-success","handleUploadSuccess","on-change","onChange","before-upload","beforeUpload","src","cover_img","height","code-style","toolbars","on","imgAdd","_l","tag","key","margin-right","closable","disable-transitions","close","$event","handleClose","_v","_s","blur","handleInputConfirm","nativeOn","keyup","_k","keyCode","inputValue","trim","click","showInput","placeholder","category","title","type","loading","onSubmit","onUpdate","staticRenderFns","ArticleAddvue_type_script_lang_js_","components","mavonEditor","mavon_editor","inputVisible","imageUrl","category_id","markdown","tags","image","categories","bold","italic","header","underline","strikethrough","mark","superscript","subscript","quote","ol","ul","link","imagelink","code","table","fullscreen","readmodel","htmlcode","help","undo","redo","trash","save","navigation","alignleft","aligncenter","alignright","subfield","preview","editor","methods","splice","indexOf","_this","length","$message","warning","$nextTick","$refs","saveTagInput","input","focus","includes","push","pos","$file","_this2","formData","FormData","upload","then","response","md","$img2Url","basePath","getCategories","_this3","_this4","$notify","message","duration","$router","_this5","JSON","stringify","getArticle","_this6","$route","file","isLt2M","error","raw","URL","createObjectURL","setUploadHeaders","Accept","X-Requested-With","Authorization","auth","watch","mounted","articleAdd_ArticleAddvue_type_script_lang_js_","component","componentNormalizer","options","__file","__webpack_exports__","$export","__webpack_require__","context","INCLUDES","P","F","searchString","arguments","undefined","MATCH","module","exports","KEY","re","e","f","$includes","el","isObject","cof","it","isRegExp","storeCategory","updateCategory","deleteCategory","defined","that","NAME","TypeError","String"],"mappings":"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","file":"admin/js/chunk-2913.607749d7.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/lib/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ArticleAdd.vue?vue&type=style&index=0&id=2b896208&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/lib/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ArticleAdd.vue?vue&type=style&index=0&id=2b896208&lang=less&scoped=true&\"","import request from \"@/utils/request\";\n\n/**\n * 新增文章\n *\n * @param {*} data\n */\nexport function storeArticle(data) {\n    return request({\n        url: \"/articles\",\n        method: \"post\",\n        data\n    });\n}\n\n/**\n * 文章详情\n *\n * @param {*} id\n */\nexport function showArtcile(id) {\n    return request({\n        url: \"/articles/\" + id,\n        method: \"get\"\n    });\n}\n\n/**\n * 文章列表\n *\n * @param {*} data\n */\nexport function getArticles(data) {\n    return request({\n        url: \"/articles\",\n        method: \"get\",\n        params: data\n    });\n}\n\n/**\n * 删除文章\n *\n * @param {*} id\n */\nexport function deleteArticle(id) {\n    return request({\n        url: \"/articles/\" + id,\n        method: \"post\",\n        data: {\n            _method: \"DELETE\"\n        }\n    });\n}\n\n/**\n * 修改文章\n *\n * @param {*} id\n * @param {*} data\n */\nexport function updateArticle(id, data) {\n    data.append(\"_method\", \"PUT\");\n    return request({\n        url: \"/articles/\" + id,\n        method: \"post\",\n        data\n    });\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-form',{attrs:{\"label-position\":\"right\",\"label-width\":\"80px\",\"model\":_vm.article}},[_c('el-form-item',{attrs:{\"label\":\"标题\"}},[_c('el-input',{staticStyle:{\"width\":\"450px\"},attrs:{\"size\":\"small\"},model:{value:(_vm.article.title),callback:function ($$v) {_vm.$set(_vm.article, \"title\", $$v)},expression:\"article.title\"}})],1),_c('el-form-item',{attrs:{\"label\":\"封面\"}},[_c('el-upload',{ref:\"upload\",staticClass:\"avatar-uploader\",attrs:{\"action\":\"/api/admin/images\",\"name\":\"image\",\"headers\":_vm.uploadHeaders,\"show-file-list\":false,\"auto-upload\":false,\"on-success\":_vm.handleUploadSuccess,\"on-change\":_vm.onChange,\"before-upload\":_vm.beforeUpload}},[(_vm.article.cover_img)?_c('img',{staticClass:\"avatar\",attrs:{\"src\":_vm.article.cover_img}}):_c('i',{staticClass:\"el-icon-plus avatar-uploader-icon\"})])],1),_c('el-form-item',{attrs:{\"label\":\"正文\"}},[_c('mavon-editor',{ref:\"md\",staticStyle:{\"height\":\"600px\"},attrs:{\"code-style\":\"googlecode\",\"toolbars\":_vm.toolbars},on:{\"imgAdd\":_vm.imgAdd},model:{value:(_vm.article.markdown),callback:function ($$v) {_vm.$set(_vm.article, \"markdown\", $$v)},expression:\"article.markdown\"}})],1),_c('el-form-item',{attrs:{\"label\":\"标签\"}},[_vm._l((_vm.article.tags),function(tag){return _c('el-tag',{key:tag,staticStyle:{\"margin-right\":\"10px\"},attrs:{\"size\":\"normal\",\"closable\":\"\",\"disable-transitions\":false},on:{\"close\":function($event){_vm.handleClose(tag)}}},[_vm._v(\"\\n      \"+_vm._s(tag)+\"\\n    \")])}),(_vm.inputVisible)?_c('el-input',{ref:\"saveTagInput\",staticClass:\"input-new-tag\",attrs:{\"size\":\"small\"},on:{\"blur\":_vm.handleInputConfirm},nativeOn:{\"keyup\":function($event){if(!('button' in $event)&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.handleInputConfirm($event)}},model:{value:(_vm.inputValue),callback:function ($$v) {_vm.inputValue=(typeof $$v === 'string'? $$v.trim(): $$v)},expression:\"inputValue\"}}):_c('el-button',{staticClass:\"button-new-tag\",attrs:{\"size\":\"small\"},on:{\"click\":_vm.showInput}},[_vm._v(\"+ 新增标签\")])],2),_c('el-form-item',{attrs:{\"label\":\"分类\"}},[_c('el-select',{attrs:{\"size\":\"small\",\"placeholder\":\"请选择分类\"},model:{value:(_vm.article.category_id),callback:function ($$v) {_vm.$set(_vm.article, \"category_id\", $$v)},expression:\"article.category_id\"}},_vm._l((_vm.categories),function(category){return _c('el-option',{key:category.id,attrs:{\"label\":category.title,\"value\":category.id}})}))],1),_c('el-form-item',[(_vm.article.id === 0)?_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\",\"loading\":_vm.loading},on:{\"click\":_vm.onSubmit}},[_vm._v(\"确认发布\")]):_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\",\"loading\":_vm.loading},on:{\"click\":_vm.onUpdate}},[_vm._v(\"确认修改\")])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <el-form \n    label-position=\"right\" \n    label-width=\"80px\" \n    :model=\"article\">\n    <el-form-item label=\"标题\">\n      <el-input\n        v-model=\"article.title\"\n        size=\"small\"\n        style=\"width: 450px\"\n      />\n    </el-form-item>\n    <el-form-item label=\"封面\">\n      <el-upload\n        ref=\"upload\"\n        class=\"avatar-uploader\"\n        action=\"/api/admin/images\"\n        name=\"image\"\n        :headers=\"uploadHeaders\"\n        :show-file-list=\"false\"\n        :auto-upload=\"false\"\n        :on-success=\"handleUploadSuccess\"\n        :on-change=\"onChange\"\n        :before-upload=\"beforeUpload\">\n        <img \n          v-if=\"article.cover_img\" \n          :src=\"article.cover_img\" \n          class=\"avatar\">\n        <i \n          v-else \n          class=\"el-icon-plus avatar-uploader-icon\"/>\n      </el-upload>\n    </el-form-item>\n    <el-form-item label=\"正文\">\n      <mavon-editor\n        style=\"height: 600px;\"\n        ref='md'\n        code-style=\"googlecode\"\n        v-model=\"article.markdown\"\n        @imgAdd=\"imgAdd\"\n        :toolbars=\"toolbars\"/>\n    </el-form-item>\n    <el-form-item label=\"标签\">\n      <el-tag\n        style=\"margin-right: 10px\"\n        size=\"normal\"\n        v-for=\"tag in article.tags\"\n        :key=\"tag\"\n        closable\n        :disable-transitions=\"false\"\n        @close=\"handleClose(tag)\">\n        {{ tag }}\n      </el-tag>\n      <el-input\n        class=\"input-new-tag\"\n        v-if=\"inputVisible\"\n        v-model.trim=\"inputValue\"\n        ref=\"saveTagInput\"\n        size=\"small\"\n        @keyup.enter.native=\"handleInputConfirm\"\n        @blur=\"handleInputConfirm\"\n      />\n      <el-button\n        v-else\n        class=\"button-new-tag\"\n        size=\"small\"\n        @click=\"showInput\">+ 新增标签</el-button>\n    </el-form-item>\n    <el-form-item label=\"分类\">\n      <el-select\n        v-model=\"article.category_id\"\n        size=\"small\"\n        placeholder=\"请选择分类\">\n        <el-option\n          v-for=\"category in categories\"\n          :label=\"category.title\"\n          :value=\"category.id\"\n          :key=\"category.id\"/>\n      </el-select>\n    </el-form-item>\n    <el-form-item>\n      <el-button\n        @click=\"onSubmit\"\n        size=\"small\"\n        type=\"primary\"\n        :loading=\"loading\"\n        v-if=\"article.id === 0\">确认发布</el-button>\n      <el-button\n        @click=\"onUpdate\"\n        size=\"small\"\n        type=\"primary\"\n        :loading=\"loading\"\n        v-else>确认修改</el-button>\n    </el-form-item>\n  </el-form>\n</template>\n\n<script>\nimport { mavonEditor } from \"mavon-editor\";\nimport \"mavon-editor/dist/css/index.css\";\nimport { imageUpload } from \"@/api/upload\";\nimport { getCategories } from \"@/api/category\";\nimport { storeArticle, showArtcile, updateArticle } from \"@/api/article\";\nimport { getAccessToken } from \"@/utils/auth\";\nexport default {\n    name: \"ArticleAdd\",\n    components: {\n        mavonEditor\n    },\n    data() {\n        return {\n            inputVisible: false,\n            inputValue: \"\",\n            value: \"\",\n            imageUrl: \"\",\n            article: {\n                title: \"\",\n                category_id: \"\",\n                markdown: \"\",\n                tags: [],\n                cover_img: \"\",\n                id: 0,\n                image: {}\n            },\n            loading: false,\n            categories: [],\n            toolbars: {\n                bold: true, // 粗体\n                italic: true, // 斜体\n                header: true, // 标题\n                underline: true, // 下划线\n                strikethrough: true, // 中划线\n                mark: true, // 标记\n                superscript: true, // 上角标\n                subscript: true, // 下角标\n                quote: true, // 引用\n                ol: true, // 有序列表\n                ul: true, // 无序列表\n                link: true, // 链接\n                imagelink: true, // 图片链接\n                code: true, // code\n                table: true, // 表格\n                fullscreen: true, // 全屏编辑\n                readmodel: true, // 沉浸式阅读\n                htmlcode: true, // 展示html源码\n                help: true, // 帮助\n                /* 1.3.5 */\n                undo: true, // 上一步\n                redo: true, // 下一步\n                trash: true, // 清空\n                save: true, // 保存（触发events中的save事件）\n                /* 1.4.2 */\n                navigation: true, // 导航目录\n                /* 2.1.8 */\n                alignleft: true, // 左对齐\n                aligncenter: true, // 居中\n                alignright: true, // 右对齐\n                /* 2.2.1 */\n                subfield: true, // 单双栏模式\n                preview: true // 预览\n            },\n            editor: {},\n            uploadHeaders: {}\n        };\n    },\n    methods: {\n        /**\n         * 关闭标签\n         */\n        handleClose(tag) {\n            this.article.tags.splice(this.article.tags.indexOf(tag), 1);\n        },\n        /**\n         * 显示标签\n         */\n        showInput() {\n            if (this.article.tags.length >= 5) {\n                this.$message.warning(\"标签最多添加5个\");\n                return;\n            }\n            this.inputVisible = true;\n            this.$nextTick(() => {\n                this.$refs.saveTagInput.$refs.input.focus();\n            });\n        },\n        /**\n         * 添加标签\n         */\n        handleInputConfirm() {\n            if (this.article.tags.includes(this.inputValue)) {\n                this.$message.warning(\"当前标签已添加\");\n                return;\n            }\n            let inputValue = this.inputValue;\n            if (inputValue) {\n                this.article.tags.push(inputValue);\n            }\n            this.inputVisible = false;\n            this.inputValue = \"\";\n        },\n        /**\n         * markdown 编辑器图片上传\n         */\n        imgAdd(pos, $file) {\n            let formData = new FormData();\n            formData.append(\"image\", $file);\n            imageUpload(formData).then(response => {\n                if (response.data.code === \"2000\") {\n                    this.$refs.md.$img2Url(pos, response.data.data.basePath);\n                }\n            });\n        },\n        /**\n         * 获取分类\n         */\n        getCategories() {\n            getCategories().then(response => {\n                this.categories = response.data.data;\n            });\n        },\n        /**\n         * 提交\n         */\n        onSubmit() {\n            var formData = new FormData();\n            formData.append(\"title\", this.article.title);\n            formData.append(\"category_id\", this.article.category_id);\n            formData.append(\"markdown\", this.article.markdown);\n            formData.append(\"tags\", this.article.tags);\n            formData.append(\"image\", this.article.image);\n            storeArticle(formData).then(() => {\n                this.$notify({\n                    title: \"成功\",\n                    message: \"文章添加成功\",\n                    type: \"success\",\n                    duration: 2000\n                });\n                this.$router.push(\"/articles\");\n            });\n        },\n        /**\n         * 修改\n         */\n        onUpdate() {\n            var formData = new FormData();\n            formData.append(\"title\", this.article.title);\n            formData.append(\"category_id\", this.article.category_id);\n            formData.append(\"markdown\", this.article.markdown);\n            formData.append(\"tags\", this.article.tags);\n            if (JSON.stringify(this.article.image) !== \"{}\") {\n                formData.append(\"image\", this.article.image);\n            }\n            updateArticle(this.article.id, formData).then(() => {\n                this.$notify({\n                    title: \"成功\",\n                    message: \"文章修改成功\",\n                    type: \"success\",\n                    duration: 2000\n                });\n                this.$router.push(\"/articles\");\n            });\n        },\n        /**\n         * 获取文章详情\n         */\n        getArticle() {\n            if (this.$route.params.id > 0) {\n                showArtcile(this.$route.params.id).then(response => {\n                    this.article = response.data.data;\n                    this.article.category_id = response.data.data.category_id;\n                    for (let key in this.article.tags) {\n                        this.article.tags[key] = this.article.tags[key].title;\n                    }\n                    this.getCategories();\n                });\n            } else {\n                this.getCategories();\n            }\n        },\n        /**\n         * 封面图片上传前钩子\n         */\n        beforeUpload(file) {\n            const isLt2M = file.size / 1024 / 1024 < 4;\n\n            if (!isLt2M) {\n                this.$message.error(\"上传头像图片大小不能超过 4MB!\");\n            }\n\n            return isLt2M;\n        },\n        /**\n         * 更换图片事件\n         */\n        onChange(file) {\n            this.article.image = file.raw;\n            this.article.cover_img = URL.createObjectURL(this.article.image);\n        },\n        /**\n         * 封面图片上传成功\n         */\n        // handleUploadSuccess(response, file) {\n        // this.article.cover_img = file.raw\n        // console.log(file)\n        // if (response.code === \"2000\") {\n        //     this.article.cover_img = response.data.basePath;\n        // } else {\n        //     this.$message.error(\"封面图片上传失败。\");\n        // }\n        // },\n        /**\n         * 文件上传请求头\n         */\n        setUploadHeaders() {\n            this.uploadHeaders = {\n                Accept: \"application/json\",\n                \"X-Requested-With\": \"XMLHttpRequest\",\n                Authorization: \"Bearer \" + getAccessToken()\n            };\n        }\n    },\n    watch: {\n        $route() {\n            this.article = {};\n        }\n    },\n    mounted() {\n        this.getArticle();\n        this.setUploadHeaders();\n    }\n};\n</script>\n\n<style lang=\"less\" scoped>\n@import \"./ArticleAdd.less\";\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ArticleAdd.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ArticleAdd.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ArticleAdd.vue?vue&type=template&id=2b896208&scoped=true&\"\nimport script from \"./ArticleAdd.vue?vue&type=script&lang=js&\"\nexport * from \"./ArticleAdd.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ArticleAdd.vue?vue&type=style&index=0&id=2b896208&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2b896208\",\n  null\n  \n)\n\ncomponent.options.__file = \"ArticleAdd.vue\"\nexport default component.exports","// 21.1.3.7 String.prototype.includes(searchString, position = 0)\n'use strict';\nvar $export = require('./_export');\nvar context = require('./_string-context');\nvar INCLUDES = 'includes';\n\n$export($export.P + $export.F * require('./_fails-is-regexp')(INCLUDES), 'String', {\n  includes: function includes(searchString /* , position = 0 */) {\n    return !!~context(this, searchString, INCLUDES)\n      .indexOf(searchString, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","var MATCH = require('./_wks')('match');\nmodule.exports = function (KEY) {\n  var re = /./;\n  try {\n    '/./'[KEY](re);\n  } catch (e) {\n    try {\n      re[MATCH] = false;\n      return !'/./'[KEY](re);\n    } catch (f) { /* empty */ }\n  } return true;\n};\n","'use strict';\n// https://github.com/tc39/Array.prototype.includes\nvar $export = require('./_export');\nvar $includes = require('./_array-includes')(true);\n\n$export($export.P, 'Array', {\n  includes: function includes(el /* , fromIndex = 0 */) {\n    return $includes(this, el, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\nrequire('./_add-to-unscopables')('includes');\n","// 7.2.8 IsRegExp(argument)\nvar isObject = require('./_is-object');\nvar cof = require('./_cof');\nvar MATCH = require('./_wks')('match');\nmodule.exports = function (it) {\n  var isRegExp;\n  return isObject(it) && ((isRegExp = it[MATCH]) !== undefined ? !!isRegExp : cof(it) == 'RegExp');\n};\n","import request from \"@/utils/request\";\n\n/**\n * 获取分类列表\n */\nexport function getCategories() {\n    return request({\n        url: \"/categories\",\n        method: \"get\"\n    });\n}\n\n/**\n * 新增\n *\n * @param {*} data\n */\nexport function storeCategory(data) {\n    return request({\n        url: \"/categories\",\n        method: \"post\",\n        data\n    });\n}\n\n/**\n * 更新\n *\n * @param {*} data\n * @param {*} id\n */\nexport function updateCategory(data, id) {\n    data[\"_method\"] = \"PUT\";\n    return request({\n        url: \"/categories/\" + id,\n        method: \"post\",\n        data\n    });\n}\n\n/**\n * 删除\n *\n * @param {*} id\n */\nexport function deleteCategory(id) {\n    return request({\n        url: \"/categories/\" + id,\n        method: \"post\",\n        data: {\n            _method: \"DELETE\"\n        }\n    });\n}\n","// helper for String#{startsWith, endsWith, includes}\nvar isRegExp = require('./_is-regexp');\nvar defined = require('./_defined');\n\nmodule.exports = function (that, searchString, NAME) {\n  if (isRegExp(searchString)) throw TypeError('String#' + NAME + \" doesn't accept regex!\");\n  return String(defined(that));\n};\n"],"sourceRoot":""}